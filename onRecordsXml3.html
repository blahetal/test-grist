<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>onRecords</title>
    <script src="https://docs.getgrist.com/grist-plugin-api.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/xml-js@1.6.11/dist/xml-js.min.js"></script>
  </head>
  <body>
    <pre id="readout" lang="xml">Waiting for data...</pre>
    <script>
      grist.ready();
      const options = {compact: true, ignoreComment: true, spaces: 4};
      grist.onRecords(function(records) {
        const json = JSON.stringify(records);
        const xml = json2xml(json, options);
        console.log(xml);
        document.getElementById('readout').innerHTML = xml;
      });
    </script>
  </body>
</html>